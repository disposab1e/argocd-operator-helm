version: 2.1
jobs:
  operator-and-bundles:
    machine: 
      image: ubuntu-1604:201903-01
    steps:
      - checkout
      - run:
          name: Use Python 3.6.5
          command: pyenv global 3.6.5
      - run:
          name: Install dependencies
          environment:
            OPERATOR_SDK_VERSION: v0.15.0
          command: build/ci/build/install-deps
      - run:
          name: Build & Push
          command: build/ci/build/install-deps


workflows:
  version: 2
  build:
    jobs:
      - operator-and-bundles:
          filters:
            branches:
              only: circle-ci
